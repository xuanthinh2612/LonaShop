<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:replace="~{/user/layout/header::header}"></head>
<body>
<nav th:replace="~{/user/layout/navbar::navbar}"></nav>

<div class="container" style="min-height: 50vh;">
    <div class="px-xl-5">
        <h2 class="px-3 mb-4">üõí Gi·ªè h√†ng c·ªßa b·∫°n</h2>
        <div class="row px-3" th:if="${cart.getCartItems().size() == 0}">
            <div class="col-lg-12">
                <div class="lona-card">
                    <div class="text-center">
                        Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong gi·ªè h√†ng c·ªßa b·∫°n! Quay l·∫°i <a href="/">Trang ch·ªß</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row px-3" th:if="${cart.getCartItems().size() != 0}">
            <div class="col-lg-8">
                <div class="lona-card" id="myCart">
                    <div class="lona-cart-item d-flex align-items-center justify-content-between border-bottom"
                         th:each="cartItem : ${cart.getCartItems()}">
                        <img th:src="${cartItem.getProduct.getAvatar().getImageUrl()}" alt="S·∫£n ph·∫©m">
                        <div class="ms-3 flex-grow-1">
                            <a th:href="'/product/show/'+${cartItem.getProduct().getId()}">
                                <h5 class="mb-1" th:text="${cartItem.getProduct().getName()}">Product Name</h5>
                            </a>
                            <p class="text-muted">Gi√°: <span class="price" th:data-price="${cartItem.getPriceAtTime()}" th:text="${#numbers.formatInteger(cartItem.getPriceAtTime(), 3, 'COMMA')}">0</span>ƒë
                            </p>
                        </div>
                        <input th:value="${cartItem.getQuantity()}" type="number" class="form-control quantity"
                               value="1" min="1" style="width: 60px;">
                        <span class="total-price ms-3"
                              th:text="${#numbers.formatInteger(cartItem.getSubAmount(), 3, 'COMMA')}">0</span><span>ƒë</span>
                            <input hidden="hidden" th:value="${cartItem.getId()}" name="cartItemId">
                            <button class="btn btn-danger btn-sm ms-3 remove-item"><i class="fa-solid fa-trash"></i>
                            </button>
                    </div>
                </div>
            </div>
            <!-- Ph·∫ßn t·ªïng k·∫øt ƒë∆°n h√†ng -->
            <div class="col-lg-4">
                <div class="lona-card">
                    <h4 class="mb-3">T√≥m t·∫Øt ƒë∆°n h√†ng</h4>
                    <p class="lona-cart-total">T·ªïng ti·ªÅn:
                        <span id="cartTotalAmount"
                              th:text="${#numbers.formatInteger(cart.getTotalAmount(), 3, 'COMMA')}">0</span>
                        ƒë</p>
                    <a class="btn btn-primary w-100" href="/order/new">Thanh to√°n</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Back to Top -->
<a href="#" class="btn btn-info back-to-top">TOP&nbsp;<i class="fa fa-angle-double-up"></i></a>

<!-- Footer-->
<div class="container">
    <div th:replace="~{user/layout/footer::footer}"></div>
</div>
<meta hidden="hidden" name="_csrf" th:content="${_csrf.token}"/>
<meta hidden="hidden" name="_csrf_header" th:content="${_csrf.headerName}"/>

<script src="/js/cart.js"></script>
<script src="/js/main.js"></script>

</body>
</html>
